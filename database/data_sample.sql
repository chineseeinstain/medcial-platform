-- ============================================
-- 区域基层医疗机构运营数据分析平台
-- 数据补充脚本 - 添加更多测试数据
-- ============================================

USE medical_platform;

-- ============================================
-- 1. 补充患者就诊记录（最近3个月的数据）
-- ============================================
-- 2024年11月数据
INSERT INTO patient_visit (patient_id, visit_date, department, diagnosis, disease_code, cost, visit_type) VALUES
('P001', '2024-11-01', '内科', '高血压', 'I10', 120.50, '门诊'),
('P002', '2024-11-01', '外科', '外伤', 'S00', 250.00, '门诊'),
('P003', '2024-11-02', '儿科', '感冒', 'J00', 80.00, '门诊'),
('P004', '2024-11-02', '妇科', '产检', 'Z34', 180.00, '门诊'),
('P005', '2024-11-03', '内科', '糖尿病', 'E11', 150.00, '门诊'),
('P006', '2024-11-03', '急诊科', '急性腹痛', 'R10', 350.00, '急诊'),
('P007', '2024-11-04', '内科', '高血压', 'I10', 120.50, '门诊'),
('P008', '2024-11-04', '外科', '手术', 'Z47', 5000.00, '住院'),
('P009', '2024-11-05', '儿科', '发热', 'R50', 90.00, '门诊'),
('P010', '2024-11-05', '内科', '冠心病', 'I25', 220.00, '门诊'),

-- 2024年12月数据
('P011', '2024-12-01', '内科', '高血压', 'I10', 120.50, '门诊'),
('P012', '2024-12-01', '外科', '外伤', 'S00', 250.00, '门诊'),
('P013', '2024-12-02', '儿科', '咳嗽', 'R05', 70.00, '门诊'),
('P014', '2024-12-02', '妇科', '妇科检查', 'Z00', 130.00, '门诊'),
('P015', '2024-12-03', '内科', '感冒', 'J00', 80.00, '门诊'),
('P016', '2024-12-03', '急诊科', '急性腹痛', 'R10', 350.00, '急诊'),
('P017', '2024-12-04', '内科', '高血压', 'I10', 120.50, '门诊'),
('P018', '2024-12-04', '外科', '手术', 'Z47', 5000.00, '住院'),
('P019', '2024-12-05', '儿科', '腹泻', 'A09', 85.00, '门诊'),
('P020', '2024-12-05', '内科', '糖尿病', 'E11', 150.00, '门诊'),

-- 2025年1月数据（当前月）
('P021', '2025-01-01', '内科', '高血压', 'I10', 120.50, '门诊'),
('P022', '2025-01-01', '外科', '外伤', 'S00', 250.00, '门诊'),
('P023', '2025-01-02', '儿科', '发热', 'R50', 90.00, '门诊'),
('P024', '2025-01-02', '妇科', '产检', 'Z34', 180.00, '门诊'),
('P025', '2025-01-03', '内科', '冠心病', 'I25', 220.00, '门诊'),
('P026', '2025-01-03', '急诊科', '急性腹痛', 'R10', 350.00, '急诊'),
('P027', '2025-01-04', '内科', '高血压', 'I10', 120.50, '门诊'),
('P028', '2025-01-04', '外科', '手术', 'Z47', 5000.00, '住院'),
('P029', '2025-01-05', '儿科', '咳嗽', 'R05', 70.00, '门诊'),
('P030', '2025-01-05', '内科', '感冒', 'J00', 80.00, '门诊');

-- ============================================
-- 2. 补充科室运营数据（最近3个月）
-- 使用 INSERT IGNORE 避免重复键错误
-- ============================================
-- 2024年11月
INSERT IGNORE INTO department_operation (department, stat_date, outpatient_count, total_revenue, total_cost, profit) VALUES
('内科', '2024-11-01', 8, 8000.00, 5000.00, 3000.00),
('外科', '2024-11-01', 5, 10000.00, 6000.00, 4000.00),
('儿科', '2024-11-01', 6, 4800.00, 3000.00, 1800.00),
('妇科', '2024-11-01', 4, 6000.00, 3600.00, 2400.00),
('急诊科', '2024-11-01', 3, 9000.00, 6000.00, 3000.00),

-- 2024年12月
('内科', '2024-12-01', 10, 10000.00, 6000.00, 4000.00),
('外科', '2024-12-01', 6, 12000.00, 7000.00, 5000.00),
('儿科', '2024-12-01', 7, 5600.00, 3500.00, 2100.00),
('妇科', '2024-12-01', 5, 7500.00, 4500.00, 3000.00),
('急诊科', '2024-12-01', 4, 12000.00, 8000.00, 4000.00),

-- 2025年1月
('内科', '2025-01-01', 12, 12000.00, 7200.00, 4800.00),
('外科', '2025-01-01', 7, 14000.00, 8400.00, 5600.00),
('儿科', '2025-01-01', 8, 6400.00, 4000.00, 2400.00),
('妇科', '2025-01-01', 6, 9000.00, 5400.00, 3600.00),
('急诊科', '2025-01-01', 5, 15000.00, 10000.00, 5000.00);

-- ============================================
-- 3. 补充设备使用数据
-- ============================================
INSERT INTO equipment_usage (equipment_id, equipment_name, department, usage_date, usage_hours, usage_count) VALUES
('E001', 'CT机', '影像科', '2024-11-01', 8.5, 12),
('E002', 'MRI', '影像科', '2024-11-01', 7.0, 8),
('E003', 'B超', '影像科', '2024-11-01', 10.0, 25),
('E004', 'X光机', '影像科', '2024-11-01', 8.0, 18),
('E005', '心电图', '内科', '2024-11-01', 9.5, 30),

('E001', 'CT机', '影像科', '2024-12-01', 9.0, 15),
('E002', 'MRI', '影像科', '2024-12-01', 7.5, 10),
('E003', 'B超', '影像科', '2024-12-01', 10.5, 28),
('E004', 'X光机', '影像科', '2024-12-01', 8.5, 20),
('E005', '心电图', '内科', '2024-12-01', 10.0, 35),

('E001', 'CT机', '影像科', '2025-01-01', 9.5, 18),
('E002', 'MRI', '影像科', '2025-01-01', 8.0, 12),
('E003', 'B超', '影像科', '2025-01-01', 11.0, 32),
('E004', 'X光机', '影像科', '2025-01-01', 9.0, 22),
('E005', '心电图', '内科', '2025-01-01', 10.5, 40);

-- ============================================
-- 4. 补充医保结算数据
-- ============================================
INSERT INTO insurance_settlement (settlement_no, patient_id, settlement_date, total_cost, insurance_pay, personal_pay, insurance_type) VALUES
('SET001', 'P001', '2024-11-01', 120.50, 96.40, 24.10, '城镇职工医保'),
('SET002', 'P002', '2024-11-01', 250.00, 200.00, 50.00, '城镇居民医保'),
('SET003', 'P003', '2024-11-02', 80.00, 64.00, 16.00, '新农合'),
('SET004', 'P005', '2024-11-03', 150.00, 120.00, 30.00, '城镇职工医保'),
('SET005', 'P006', '2024-11-03', 350.00, 280.00, 70.00, '城镇居民医保'),

('SET006', 'P011', '2024-12-01', 120.50, 96.40, 24.10, '城镇职工医保'),
('SET007', 'P012', '2024-12-01', 250.00, 200.00, 50.00, '城镇居民医保'),
('SET008', 'P015', '2024-12-03', 80.00, 64.00, 16.00, '新农合'),
('SET009', 'P017', '2024-12-04', 120.50, 96.40, 24.10, '城镇职工医保'),
('SET010', 'P020', '2024-12-05', 150.00, 120.00, 30.00, '城镇居民医保'),

('SET011', 'P021', '2025-01-01', 120.50, 96.40, 24.10, '城镇职工医保'),
('SET012', 'P022', '2025-01-01', 250.00, 200.00, 50.00, '城镇居民医保'),
('SET013', 'P025', '2025-01-03', 220.00, 176.00, 44.00, '城镇职工医保'),
('SET014', 'P027', '2025-01-04', 120.50, 96.40, 24.10, '新农合'),
('SET015', 'P030', '2025-01-05', 80.00, 64.00, 16.00, '城镇居民医保');

-- ============================================
-- 完成提示
-- ============================================
SELECT '数据补充完成！' AS message;
SELECT COUNT(*) AS '患者记录数' FROM patient_visit;
SELECT COUNT(*) AS '科室运营记录数' FROM department_operation;
SELECT COUNT(*) AS '设备使用记录数' FROM equipment_usage;
SELECT COUNT(*) AS '医保结算记录数' FROM insurance_settlement;

