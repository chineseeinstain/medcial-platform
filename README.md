# 区域基层医疗机构运营数据分析平台

## 📋 项目概述

本项目是一个前后端分离的数据分析平台，整合社区医院、诊所、卫生院三类机构的诊疗、资源、医保数据，生成运营决策报告，辅助优化资源配置。

## 🏗️ 项目架构

```
MDEICAL-PLATFORM/
├── backend/              # Spring Boot 后端服务
├── frontend/             # Vue 3 前端应用
├── python-analysis/      # Python 数据分析脚本
├── database/             # 数据库脚本和设计文档
├── hadoop-scripts/       # Hadoop 数据处理脚本
├── deploy/               # 部署脚本和配置
└── docs/                 # 项目文档
```

## 🛠️ 技术栈说明

### 后端技术栈

#### 1. **Java + Spring Boot**
- **作用**：构建后端API服务，处理业务逻辑
- **为什么用它**：
  - Spring Boot 提供自动配置，快速搭建项目
  - 内置Tomcat服务器，无需单独部署
  - 丰富的生态，集成各种组件简单

#### 2. **MyBatis**
- **作用**：数据库ORM框架，将Java对象映射到SQL语句
- **为什么用它**：
  - 灵活，可以写原生SQL，适合复杂查询
  - 性能好，SQL可控
  - 适合数据分析场景的复杂查询

#### 3. **MySQL**
- **作用**：关系型数据库，存储结构化数据（患者、科室、医保等）
- **为什么用它**：
  - 成熟稳定，社区支持好
  - 适合存储业务数据
  - 支持事务，保证数据一致性

#### 4. **Hadoop**
- **作用**：大数据处理框架，处理海量历史数据
- **为什么用它**：
  - 分布式存储和处理，可扩展性强
  - 适合批量ETL任务
  - 处理5000+条异构数据清洗

#### 5. **Redis**
- **作用**：内存缓存数据库，缓存热点数据
- **为什么用它**：
  - 速度快，提升API响应时间
  - 缓存高频查询数据（如科室列表、统计数据）
  - 减少数据库压力

### 前端技术栈

#### 1. **Vue 3**
- **作用**：前端框架，构建用户界面
- **为什么用它**：
  - 组件化开发，代码复用
  - 响应式数据绑定
  - 生态丰富，插件多

#### 2. **Vite**
- **作用**：前端构建工具，替代Webpack
- **为什么用它**：
  - 开发时启动快，热更新快
  - 生产构建优化好

#### 3. **ECharts**
- **作用**：数据可视化图表库
- **为什么用它**：
  - 丰富的图表类型（折线图、柱状图、饼图等）
  - 支持数据钻取
  - 交互性强

#### 4. **Element Plus**
- **作用**：Vue 3 UI组件库
- **为什么用它**：
  - 现成的组件（表格、表单、对话框等）
  - 样式统一美观
  - 开发效率高

### 分析工具

#### 1. **Python (Pandas/Numpy)**
- **作用**：数据分析脚本，生成DRG病组分析、资源利用率等模型
- **为什么用它**：
  - Pandas处理数据表格方便
  - Numpy数值计算强大
  - 适合数据分析和建模

#### 2. **SQL (OLAP分析)**
- **作用**：在线分析处理，多维数据分析
- **为什么用它**：
  - 数据库原生支持
  - 适合聚合统计
  - 性能好

## 🔄 系统工作流程

### 1. 数据流转过程

```
原始数据 → ETL清洗 → MySQL存储 → Redis缓存 → API接口 → 前端展示
                ↓
            Hadoop批量处理
                ↓
            Python分析脚本
                ↓
            生成分析报告
```

### 2. 请求处理流程

```
用户请求 → Vue前端 → HTTP请求 → Spring Boot后端
                                    ↓
                            Spring Security权限验证
                                    ↓
                            Redis缓存查询（如有）
                                    ↓
                            MyBatis查询MySQL
                                    ↓
                            调用Python脚本分析（如需要）
                                    ↓
                            返回JSON数据 → 前端渲染 → ECharts图表展示
```

### 3. 数据分析流程

```
MySQL数据 → Python脚本读取 → Pandas处理 → 生成分析结果
                                    ↓
                            写入MySQL或返回API
                                    ↓
                            前端调用API → ECharts可视化
```

## 📊 核心功能模块

### 1. 数据层（12张主题数据表）
- 患者诊疗表
- 科室运营表
- 医保结算表
- 设备使用表
- 药品库存表
- 人员信息表
- ...（共12张）

### 2. 后端API（18个RESTful接口）
- 患者数据查询
- 科室运营统计
- 医保数据分析
- DRG病组分析
- 资源利用率统计
- ...（共18个）

### 3. 前端可视化（6大分析模块）
- 门诊量趋势分析
- 医保控费分析
- 设备使用率分析
- 科室运营对比
- 患者流向分析
- 资源优化建议

## 🔐 安全机制

- **Spring Security**：实现分级权限（医生/管理员）
- **数据脱敏**：隐去患者身份证/全名
- **接口鉴权**：JWT Token验证
- **数据备份**：Shell脚本自动备份

## 🚀 快速开始

### 环境要求
- JDK 1.8+
- Node.js 16+
- Python 3.8+
- MySQL 8.0+
- Redis 6.0+
- Hadoop 3.x（可选，用于大数据处理）

### 启动步骤

1. **启动后端**
```bash
cd backend
mvn spring-boot:run
```

2. **启动前端**
```bash
cd frontend
npm install
npm run dev
```

3. **初始化数据库**
```bash
cd database
mysql -u root -p < init.sql
```

详细启动说明见各模块的README文档。

## 📚 文档导航（新手必读）

### 🎯 快速开始
1. **[快速开始指南](docs/快速开始指南.md)** - 5分钟上手项目
2. **[新手入门指南](docs/新手入门指南.md)** - 详细的入门教程

### 🏗️ 架构设计
1. **[架构设计文档](docs/架构设计.md)** - 系统整体架构
2. **[Java开发思路详解](docs/Java开发思路详解.md)** - Java开发思路和工具配合逻辑

### 💻 开发指南
1. **[实际开发流程示例](docs/实际开发流程示例.md)** - 从需求到实现的完整示例
2. **[数据库设计文档](docs/数据库设计文档.md)** - 12张数据表详细设计

### 📖 学习路径（新手友好）

#### 阶段1：理解项目结构（第1天）
1. 阅读 **[快速开始指南](docs/快速开始指南.md)**
2. 阅读 **[架构设计文档](docs/架构设计.md)**
3. 浏览代码结构

#### 阶段2：理解技术栈（第2-3天）
1. 阅读 **[Java开发思路详解](docs/Java开发思路详解.md)**
2. 查看 `backend/src/main/java/com/medical/` 了解Java包结构
3. 查看 `frontend/src` 了解Vue组件结构

#### 阶段3：理解数据流（第4天）
1. 阅读 **[实际开发流程示例](docs/实际开发流程示例.md)**
2. 理解：前端请求 → Controller → Service → Mapper → MySQL
3. 理解：数据返回 → JSON → 前端接收 → ECharts渲染

#### 阶段4：动手实践（第5天+）
1. 阅读 **[数据库设计文档](docs/数据库设计文档.md)**
2. 实现一个简单的CRUD功能
3. 添加Redis缓存
4. 创建前端页面

## 📖 各工具配合逻辑详解

### 场景1：用户查看门诊量趋势

1. **前端（Vue）**：用户点击"门诊量趋势"菜单
2. **API请求**：发送GET请求到 `/api/statistics/outpatient-trend`
3. **后端（Spring Boot）**：
   - Controller接收请求
   - 检查Redis缓存（如有直接返回）
   - 调用Service层
   - Service调用MyBatis Mapper查询MySQL
   - 返回统计数据
4. **前端接收**：收到JSON数据
5. **ECharts渲染**：将数据转换为折线图展示

### 场景2：生成DRG病组分析报告

1. **前端**：用户点击"生成DRG报告"
2. **后端API**：`/api/analysis/drg-report`
3. **后端处理**：
   - 从MySQL读取患者诊疗数据
   - 调用Python脚本（通过ProcessBuilder）
   - Python脚本用Pandas处理数据，生成分析结果
   - 将结果写入MySQL或返回JSON
4. **前端展示**：显示分析报告和图表

### 场景3：批量数据处理（ETL）

1. **定时任务**：Spring Boot定时任务触发
2. **Hadoop处理**：调用Hadoop脚本处理原始数据
3. **数据清洗**：Python脚本清洗数据，脱敏处理
4. **数据入库**：MyBatis批量插入MySQL
5. **缓存更新**：更新Redis缓存

## 🎯 关键指标

- **数据准确率**：95%+
- **API响应时间**：≤80ms
- **决策效率提升**：60%
- **数据脱敏**：符合隐私规范

## 📝 开发规范

- 后端：遵循RESTful API设计规范
- 前端：组件化开发，统一代码风格
- 数据库：统一命名规范，添加注释
- 代码：添加必要注释，便于维护

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT License

